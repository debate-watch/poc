<html>
<head>
  <title>Debate Watch</title>
  <link rel="stylesheet" href="bower_components/octicons/octicons/octicons.css">
</head>
<body>

  <div id="nav">
    <h1><span class="mega-octicon octicon-podium"></span>&nbsp;Debate Watch</h1>
  </div>

  <div id="page">
    <h2 id="event-title">Iowa Republican Lincoln Dinner</h2>

    <div id="player">Loading the player ...</div>

    <div id="timeline" style="display:inline-block; margin-top:1em;"></div>
  </div>

  <script src="bower_components/d3/d3.min.js" charset="utf-8"></script>
  <script src="bower_components/jquery/dist/jquery.min.js"></script>
  <script type="text/javascript">

      function play(){
          jwplayer('player').play(true)
      };

      function pause(){
          jwplayer('player').play(false)
      };

      d3.json("api_keys.json", function(json){

          var jwplayer_source_url = "http://jwpsrv.com/library/" + json["jwplayer"] + ".js"

          $.getScript(jwplayer_source_url, function( data, textStatus, jqxhr ) {

              jwplayer('player').setup({
                  file: '/videos/IowaRepublicanLincolnDinner_400771_3.mp4',
                  image: '/images/IowaRepublicanLincolnDinner_400771.png',
                  height: 360,
                  width: 640
              }).onTime(function(){
                  console.log("POSITION:", this.getPosition() ) // console.log("STATE:", this.getState()) // this will always log "PLAYING" under the .onTime() function. Time doesn't move when the player is paused.
              });

              var timeline = d3.select("div#timeline").append("svg")
                  .attr("height",36)
                  .attr("width",640)
                  .attr("style","border:1px solid #ccc; background:#eee;")

              var current_position_reference_line = timeline.append("svg:line")
                  .attr("x1",0).attr("y1",0)
                  .attr("x2",0).attr("y2",100)
                  .attr("fill","none")
                  .attr("stroke","steelblue")
                  .attr("stroke-width","1.5px")

              play()

          });

      });


  </script>
</body>
</html>
